From a52522301eeb92a5dc7aadf4f9a36f939413b4e8 Mon Sep 17 00:00:00 2001
From: Thomas Goirand <zigo@debian.org>
Date: Mon, 25 Sep 2017 23:57:15 +0200
Subject: Trust PATH for udevadm and modprobe

---
 cloudinit/sources/DataSourceAltCloud.py          | 4 ++--
 tests/unittests/test_datasource/test_altcloud.py | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/cloudinit/sources/DataSourceAltCloud.py b/cloudinit/sources/DataSourceAltCloud.py
index c2b0eac2..dffac443 100644
--- a/cloudinit/sources/DataSourceAltCloud.py
+++ b/cloudinit/sources/DataSourceAltCloud.py
@@ -28,8 +28,8 @@ LOG = logging.getLogger(__name__)
 CLOUD_INFO_FILE = '/etc/sysconfig/cloud-info'
 
 # Shell command lists
-CMD_PROBE_FLOPPY = ['/sbin/modprobe', 'floppy']
-CMD_UDEVADM_SETTLE = ['/sbin/udevadm', 'settle', '--timeout=5']
+CMD_PROBE_FLOPPY = ['modprobe', 'floppy']
+CMD_UDEVADM_SETTLE = ['udevadm', 'settle', '--timeout=5']
 
 META_DATA_NOT_SUPPORTED = {
     'block-device-mapping': {},
diff --git a/tests/unittests/test_datasource/test_altcloud.py b/tests/unittests/test_datasource/test_altcloud.py
index b0ad86ab..8ac5387b 100644
--- a/tests/unittests/test_datasource/test_altcloud.py
+++ b/tests/unittests/test_datasource/test_altcloud.py
@@ -282,9 +282,9 @@ class TestUserDataRhevm(TestCase):
         cloudinit.sources.DataSourceAltCloud.CLOUD_INFO_FILE = \
             '/etc/sysconfig/cloud-info'
         cloudinit.sources.DataSourceAltCloud.CMD_PROBE_FLOPPY = \
-            ['/sbin/modprobe', 'floppy']
+            ['modprobe', 'floppy']
         cloudinit.sources.DataSourceAltCloud.CMD_UDEVADM_SETTLE = \
-            ['/sbin/udevadm', 'settle', '--quiet', '--timeout=5']
+            ['udevadm', 'settle', '--quiet', '--timeout=5']
 
     def test_mount_cb_fails(self):
         '''Test user_data_rhevm() where mount_cb fails.'''
